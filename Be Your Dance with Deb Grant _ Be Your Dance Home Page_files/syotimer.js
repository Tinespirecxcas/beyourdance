!function(e){var t={number:"tab-val",label:"tab-metr"},l={rus:{second:["секунда","секунды","секунд"],minute:["минута","минуты","минут"],hour:["час","часа","часов"],day:["день","дня","дней"]},eng:{second:["second","seconds"],minute:["minute","minutes"],hour:["hour","hours"],day:["day","days"]}};function a(e,t){return t=""!=t||t,e<=9&&t?"0"+e:""+e}function o(e,t,l,a){return t||function(e,t,l){switch(l){case"rus":return cases=[2,0,1,1,1,2],t[e%100>4&&e%100<20?2:cases[e%10<5?e%10:5]];case"eng":return t[1==e?0:1]}}(e,l,a)}function i(l,a){var o=t[a],i=l[a+"Font"];i&&(o+=" "+i);var n=l[a+"FontWeight"];n&&(o+=" "+n);var r=l[a+"TextDecorationStyle"];r&&(o+=" "+r);var d=l[a+"FontStyle"];return d&&e.isArray(d)&&d.forEach(function(e){o+=" "+e}),o}e.fn.syotimer=function(t){defaultTimer={year:2014,month:7,day:31,hour:0,minute:0,second:0,innerCallback:function(){},periodic:!1,periodInterval:7,periodUnit:"d",dayVisible:!0,dubleNumbers:!0,effectType:"none",lang:"eng",headTitle:"",footTitle:"",afterDeadline:function(e){e.bodyBlock.html('<p style="font-size: 1.2em;">The countdown is finished!</p>')}};var n=e.extend(defaultTimer,t||{});return this.each(function(){var t=e(this);!function(t,l){timer_html='<div class="timer-head-block" style="letter-spacing:'+l.letterSpacing+'px;" >'+l.headTitle+"</div>",timer_html+='<div class="timer-body-block" style="letter-spacing:'+l.letterSpacing+'px;">';var a=i(l,"label"),o=i(l,"number");l.dayVisible&&(timer_html+='            <div class="table-cell day">                <div class="'+o+' tab-val" style="text-shadow:'+l.numberTextShadow+";line-height:"+l.numberLineHeight+"px;letter-spacing:"+l.letterSpacing+"px;font-size:"+l.numberSize+";color:"+l.color+";text-decoration-color:"+l.numberLineColor+";background-color:"+l.backgroundcolor+";width:"+l.width+'px;">0</div>                <div class="'+a+' tab-metr" style="text-shadow:'+l.labelTextShadow+";line-height:"+l.labelLineHeight+"px;letter-spacing:"+l.labelLetterSpacing+"px;font-size:"+l.labelSize+";color:"+l.labelColor+";text-decoration-color:"+l.labelLineColor+';">'+l.dayLabel+"</div>            </div>");timer_html+='            <div class="table-cell hour">                <div class="'+o+' tab-val"style="text-shadow:'+l.numberTextShadow+";line-height:"+l.numberLineHeight+"px;letter-spacing:"+l.letterSpacing+"px;font-size:"+l.numberSize+";color:"+l.color+";text-decoration-color:"+l.numberLineColor+";background-color:"+l.backgroundcolor+";width:"+l.width+'px;">00</div>                <div class="'+a+' tab-metr" style="text-shadow:'+l.labelTextShadow+";line-height:"+l.labelLineHeight+"px;letter-spacing:"+l.labelLetterSpacing+"px;font-size:"+l.labelSize+";color:"+l.labelColor+";text-decoration-color:"+l.labelLineColor+';">'+l.hourLabel+'</div>            </div>            <div class="table-cell minute">                <div class="'+o+' tab-val"style="text-shadow:'+l.numberTextShadow+";line-height:"+l.numberLineHeight+"px;letter-spacing:"+l.letterSpacing+"px;font-size:"+l.numberSize+";color:"+l.color+";text-decoration-color:"+l.numberLineColor+";background-color:"+l.backgroundcolor+";width:"+l.width+'px;">00</div>                <div class="'+a+' tab-metr" style="text-shadow:'+l.labelTextShadow+";line-height:"+l.labelLineHeight+"px;letter-spacing:"+l.labelLetterSpacing+"px;font-size:"+l.labelSize+";color:"+l.labelColor+";text-decoration-color:"+l.labelLineColor+';">'+l.minuteLabel+'</div>            </div>            <div class="table-cell second">                <div class="'+o+' tab-val"style="text-shadow:'+l.numberTextShadow+";line-height:"+l.numberLineHeight+"px;letter-spacing:"+l.letterSpacing+"px;font-size:"+l.numberSize+";color:"+l.color+";text-decoration-color:"+l.numberLineColor+";background-color:"+l.backgroundcolor+";width:"+l.width+'px;">00</div>                <div class="'+a+' tab-metr"style="text-shadow:'+l.labelTextShadow+";line-height:"+l.labelLineHeight+"px;letter-spacing:"+l.labelLetterSpacing+"px;font-size:"+l.labelSize+";color:"+l.labelColor+";text-decoration-color:"+l.labelLineColor+';">'+l.secondLabel+"</div>            </div>",timer_html+="</div>",timer_html+='<div class="timer-foot-block">'+l.footTitle+"</div>",t.addClass("timer").html(timer_html),headBlock=e(".timer-head-block",t),bodyBlock=e(".timer-body-block",t),footBlock=e(".timer-foot-block",t),timerBlocks={headBlock:headBlock,bodyBlock:bodyBlock,footBlock:footBlock},t=e.extend(t,timerBlocks)}(t,n),function r(){e(".second .tab-val",t).css("opacity",1),Now=new Date;var d=n.innerCallback.call();if(d&&d.wasCall)n.hour=d.hour,n.day=d.day,n.month=d.month,n.year=d.year,n.labelFont=d.labelFont,n.numberFont=d.numberFont,n.numberFontWeight=d.numberFontWeight,n.labelFontWeight=d.labelFontWeight,n.labelFontStyle=d.labelFontStyle,n.numberFontStyle=d.numberFontStyle,n.numberTextDecorationStyle=d.numberTextDecorationStyle,n.labelTextDecorationStyle=d.labelTextDecorationStyle,n.id=d.id,n.width=d.width,n.letterSpacing=d.letterSpacing,n.labelLetterSpacing=d.labelLetterSpacing,n.numberLineHeight=d.numberLineHeight,n.numberTextShadow=d.numberTextShadow,n.labelTextShadow=d.labelTextShadow,n.labelLineHeight=d.labelLineHeight,n.labelSize=d.labelSize,n.labelColor=d.labelColor,n.numberSize=d.numberSize,n.color=d.color,n.backgroundcolor=d.backgroundcolor,n.numberLineColor=d.numberLineColor,n.labelLineColor=d.labelLineColor,n.timezone=d.timezone,n.dayLabel=d.dayLabel,n.hourLabel=d.hourLabel,n.minuteLabel=d.minuteLabel,n.secondLabel=d.secondLabel;else if(!n.wasCall&&!d.wasCall)return!1;if(DeadDate=new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second),different=Math.floor((DeadDate.getTime()-new Date(Now.getFullYear(),Now.getMonth(),Now.getDate(),Now.getHours()+n.timezone,Now.getMinutes(),Now.getSeconds()).getTime())/1e3),n.periodic){switch(n.periodUnit){case"d":unit_ms=86400;break;case"h":unit_ms=3600;break;case"m":unit_ms=60;break;case"s":unit_ms=1}differentUnits=Math.abs(Math.ceil((DeadDate.getTime()-(Now.getTime()+n.timezone))/(1e3*unit_ms))),different>=0?(dUnits=differentUnits%n.periodInterval,dUnits=0==dUnits?n.periodInterval-1:dUnits-1):dUnits=n.periodInterval-differentUnits%n.periodInterval,addUnits=different%unit_ms,0==addUnits&&different<0&&dUnits--,alls=Math.abs(dUnits*unit_ms+addUnits)}else alls=different;if(alls>=0){dd=Math.floor(alls/86400),alls%=86400,dh=Math.floor(alls/3600),alls%=3600,dm=Math.floor(alls/60),alls%=60,ds=Math.floor(alls);var s=i(n,"label"),c=i(n,"number");switch(n.dayVisible?(e(".day .tab-val",t).html(dd),e(".day .tab-metr",t).html(o(dd,n.dayLabel,l[n.lang].day,n.lang)),e(n.id).find(".day .tab-val").removeClass().addClass(c),e(n.id).find(".day .tab-metr").removeClass().addClass(s),e(".hour .tab-val",t).html(a(dh,n.dubleNumbers)),e(".hour .tab-metr",t).html(o(dh,n.hourLabel,l[n.lang].hour,n.lang)),e(n.id).find(".hour .tab-val").removeClass().addClass(c),e(n.id).find(".hour .tab-metr").removeClass().addClass(s)):(dh+=24*dd,e(".hour .tab-val",t).html(a(dh,n.dubleNumbers)),e(".hour .tab-metr",t).html(o(dh,n.hourLabel)),e(n.id+" .hour .tab-val").removeClass().addClass(c),e(n.id+" .hour .tab-metr").removeClass().addClass(s)),e(n.id).find(".tab-val ").css({width:n.width+"px"}),e(n.id).find(".tab-val ").css({"font-size":n.numberSize+"px"}),e(n.id).find(".tab-val ").css({color:n.color}),e(n.id).find(".tab-val ").css({"background-color":n.backgroundcolor}),e(n.id).find(".tab-val ").css({"text-decoration-color":n.numberLineColor}),e(n.id).find(".tab-metr ").css({"font-size":n.labelSize+"px"}),e(n.id).find(".tab-metr ").css({color:n.labelColor}),e(n.id).find(".tab-metr ").css({width:n.width+"px"}),e(n.id).find(".tab-metr ").css({"text-decoration-color":n.labelLineColor}),e(".minute .tab-val",t).html(a(dm,n.dubleNumbers)),e(".minute .tab-metr",t).html(o(dm,n.minuteLabel,l[n.lang].minute,n.lang)),e(n.id).find(".minute .tab-val").removeClass().addClass(c),e(n.id).find(".minute .tab-metr").removeClass().addClass(s),e(".second .tab-val",t).html(a(ds,n.dubleNumbers)),e(".second .tab-metr",t).html(o(ds,n.secondLabel,l[n.lang].second,n.lang)),e(n.id).find(".second .tab-val").removeClass().addClass(c),e(n.id).find(".second .tab-metr").removeClass().addClass(s),e(n.id).find(".tab-val").css({"letter-spacing":n.letterSpacing+"px"}),e(n.id).find(".tab-val").css({"line-height":n.numberLineHeight+"px"}),e(n.id).find(".tab-metr").css({"letter-spacing":n.labelLetterSpacing+"px"}),e(n.id).find(".tab-metr").css({"line-height":n.labelLineHeight+"px"}),e(n.id).find(".tab-metr").css({"text-shadow":n.labelTextShadow}),e(n.id).find(".tab-val").css({"text-shadow":n.numberTextShadow}),n.effectType){case"none":setTimeout(function(){r()},500);break;case"opacity":e(".second .tab-val",t).animate({opacity:.1},1e3,"linear",r)}}else n.afterDeadline(t)}()})}}(jQuery);